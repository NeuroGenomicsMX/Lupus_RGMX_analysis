"0","library(rsample)"
"0","set.seed(NULL)"
"0","division <- initial_split(tb.pacientes, prop = 0.7)"
"0","tb.entrenamiento <- training(division)"
"0","tb.prueba <- testing(division)"
"0",""
"0","# Create training  feature matrices"
"0","# we use model.matrix(...)[, -1] to discard the intercept"
"0",""
"0","X <- select(tb.entrenamiento, -cal_totalcv)"
"0","# transform y with log transformation"
"0","Y <- select(tb.entrenamiento, cal_totalcv)"
"0",""
"0",""
"0","# grid search across "
"0","cv_glmnet <- train("
"0","  x = X,"
"0","  y = Y$cal_totalcv,"
"0","  method = ""glmnet"","
"0","  preProc = c(""zv"", ""center"", ""scale""),"
"0","  trControl = trainControl(method = ""boot"", number = 200)"
"0",")"
"0",""
"0","# model with lowest RMSE"
"0","best.parameters<-cv_glmnet$bestTune"
"0","alfa<-best.parameters$alpha"
"0","lambda<-best.parameters$lambda"
"0",""
"0","# Find coefficientes of best model"
"0","library(glmnet)"
"0","mejor_modelo<-glmnet(X,Y$cal_totalcv, alpha = alfa, lambda = lambda)"
"0","coef(mejor_modelo)"
"1","26 x 1 sparse Matrix of class ""dgCMatrix""
"
"1","                    "
"1","          s0"
"1","
(Intercept)         "
"1"," 24.15070830"
"1","
dx_time             "
"1","  .         "
"1","
sex___1             "
"1","  .         "
"1","
sex___2             "
"1","  .         "
"1","
calculated_age      "
"1","  .         "
"1","
socioeconomic_status"
"1","  0.04475439"
"1","
age_group           "
"1","  .         "
"1","
bref1               "
"1","  3.72146196"
"1","
bref2               "
"1","  2.91910633"
"1","
treatment___0       "
"1","  .         "
"1","
treatment___1       "
"1"," -0.62582096"
"1","
treatment___2       "
"1","  .         "
"1","
treatment___3       "
"1"," -0.17659094"
"1","
treatment___4       "
"1","  .         "
"1","
treatment___5       "
"1","  .         "
"1","
treatment___6       "
"1","  .         "
"1","
treatment___7       "
"1","  .         "
"1","
prednisolona.0      "
"1","  .         "
"1","
prednisolona.1      "
"1","  .         "
"1","
prednisolona.2      "
"1","  .         "
"1","
prednisolona.3      "
"1","  .         "
"1","
prednisolona.4      "
"1","  .         "
"1","
prednisolona.5      "
"1","  .         "
"1","
prednisolona.6      "
"1","  .         "
"1","
prednisolona.7      "
"1","  .         "
"1","
prednisolona.8      "
"1","  .         "
"1","
"
"0","# results for model with lowest RMSE"
"0","cv_glmnet$results %>%"
"0","  filter(alpha == cv_glmnet$bestTune$alpha, lambda == cv_glmnet$bestTune$lambda)"
